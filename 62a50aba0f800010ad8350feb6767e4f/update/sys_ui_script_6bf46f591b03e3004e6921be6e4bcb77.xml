<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_ui_script">
    <sys_ui_script action="INSERT_OR_UPDATE">
        <active>true</active>
        <description>Generic helperfunction for the client</description>
        <global>false</global>
        <name>sn_kpi_composer.ClientHelper</name>
        <script><![CDATA[var sn_kpi_composer = sn_kpi_composer || {};

sn_kpi_composer.ClientHelper = (function() {
	"use strict";
	
	return {

		// Generate a new ID for a database a database record
		// Used to override the "default" key generated by the database 
		keyGenerator: function(model, data) {
			//console.log("Generating key!");
			var key = guid();
			//console.log("Key:" + key);
			data.key = key;
			return key;
		},

		// Generate a new GUID based in a simple random generator
		guid: function() {
		  function s4() {
			return Math.floor((1 + Math.random()) * 0x10000)
			  .toString(16)
			  .substring(1);
		  }
		  return s4() + s4() + s4() + s4() + s4() + s4() + s4() + s4();
		},
		
		// 
		log: function(log, type, ex) {
			if (type) type = type.toLowerCase();
			if (type === "exception" || type === "error") {
				console.error(log);			
				if (ex && ex !== log)
					console.error(ex);
			}
			if (type === "warning" || type === "warn") {
				console.warn(log);
				if (ex && ex !== log)
					console.warn(ex);
			}
			if (!type || type === "debug") {
				console.debug(log);
				if (ex && ex !== log) 
					console.dir(ex);
			}
		},

		escapeRegex: function(string) {
			if (string.length>0 && string[0] === "*") string = string.substring(1);
			return string.replace(/[-\/\\^$*+?.()|[\]{}]/g, '\\$&');
		},

		uniqueArrayByProp: function (ar, prop) {
			var j = {};

			for (var i = 0; i < ar.length; i++) {
				var v = ar[i];
				j[v[prop]] = v;
			}
			
			return Object.keys(j).map(function (v) {
				return j[v];
			});
		},
		
		type:  "ClientHelper"
	};
})();

//polyfill for Object.assign (IE11)
if (typeof Object.assign !== 'function') {
	// Must be writable: true, enumerable: false, configurable: true
	Object.defineProperty(Object, "assign", {
	  value: function assign(target, varArgs) { // .length of function is 2
		'use strict';
		if (target === null || target === undefined) {
		  throw new TypeError('Cannot convert undefined or null to object');
		}
  
		var to = Object(target);
  
		for (var index = 1; index < arguments.length; index++) {
		  var nextSource = arguments[index];
  
		  if (nextSource !== null && nextSource !== undefined) {
			for (var nextKey in nextSource) {
			  // Avoid bugs when hasOwnProperty is shadowed
			  if (Object.prototype.hasOwnProperty.call(nextSource, nextKey)) {
				to[nextKey] = nextSource[nextKey];
			  }
			}
		  }
		}
		return to;
	  },
	  writable: true,
	  configurable: true
	});
  }]]></script>
        <script_name>ClientHelper</script_name>
        <sys_class_name>sys_ui_script</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2019-01-16 11:38:41</sys_created_on>
        <sys_id>6bf46f591b03e3004e6921be6e4bcb77</sys_id>
        <sys_mod_count>9</sys_mod_count>
        <sys_name>sn_kpi_composer.ClientHelper</sys_name>
        <sys_package display_value="KPI Composer" source="sn_kpi_composer">62a50aba0f800010ad8350feb6767e4f</sys_package>
        <sys_policy/>
        <sys_scope display_value="KPI Composer">62a50aba0f800010ad8350feb6767e4f</sys_scope>
        <sys_update_name>sys_ui_script_6bf46f591b03e3004e6921be6e4bcb77</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2021-04-20 10:36:35</sys_updated_on>
        <ui_type>0</ui_type>
        <use_scoped_format>false</use_scoped_format>
    </sys_ui_script>
</record_update>
